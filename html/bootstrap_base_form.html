<link rel="stylesheet" href="../css/component-chosen.css?ssd" />
<script src="../js/chosen.jquery.min.js"></script>

<script src="../dist/ckeditor/ckeditor.js"></script>
<script src="../dist/layui_exts/comm.js"></script>


 <div class="addFormModal form-horizontal bg_white"  style="" >
  <form  class="form" >

    <div class="row align-items-center">
      <div class="control-label col-md-2 text-right">ID</div>
      <div class="col-md-4">
        <input class="form-control" readonly=""  value=""  />
      </div>
 
      <div class="control-label col-md-2 text-right required"><span class="red">*</span>数据类型</div>
      <div class="col-md-4">
        <select class="form-control"   >
            <option>帖子</option>
          </select>
      </div>

    </div>

     <div class="row align-items-center">
      <div class="control-label col-md-2 text-right required"><span class="red">*</span>ztree</div>
      <div class="col-md-3">
         <input type="search" name="keyword" autocomplete="off" id="tree11" lay-filter="tree" class="layui-input"  />
         <i class="layui-icon layui-icon-search my-icon-search" ></i>
      </div>
       <div class="col-md-1">
         <span class="btn btn-primary" id="reward" >打赏</span>
      </div>


      <div class="control-label col-md-2 text-right required"><span class="red">*</span>用户名</div>
      <div class="col-md-3">
         <input type="search" name="keyword" autocomplete="off" class="layui-input" value="xxxxx"   />
         <i class="layui-icon layui-icon-search my-icon-search" ></i>
      </div>
       <div class="col-md-1">
         <span class="btn btn-primary" id="pay" >支付</span>
      </div>

    </div>


    <div class="row align-items-center">
      <div class="control-label col-md-2 text-right required"><span class="red">*</span>品牌</div>
      <div class="col-md-4 xm-select-demo" id="demo1" ></div>
      <div class="col-md-4 xm-select-demo"  >
        
        <span class="layui-btn" id="fuzhi" >赋值</span>
        <span class="layui-btn" id="quzhi"  >取值</span>

      </div>
  
    </div>


    <div class="row align-items-center">
      <div class="control-label col-md-2 text-right required"><span class="red">*</span>eletree</div>
      <div class="col-md-4 xm-select-demo relative"  >
          <input type="text" name="title" required="" lay-verify="required" placeholder="请输入xxxx" readonly="" autocomplete="off" class="layui-input">
            <i class="layui-icon layui-icon-search my-icon-search" ></i>
           <div  id="ele-xl" class="eleTree ele5" lay-filter="data5"></div>

      </div>
    </div>


  <!--    <div class="row align-items-center">
      <div class="control-label col-md-2 text-right required"><span class="red">*</span>品牌树选择</div>
      <div class="col-md-4 xm-select-demo" id="demo2" ></div>
    </div> -->



    <div class="row align-items-center">
      <div class="control-label col-md-2 text-right required"><span class="red">*</span>标题</div>
      <div class="col-md-10">
        <input class="form-control"   value=""  />
        <span class="fc_red" >不能为空</span>
      </div>

    </div>

    <div class="row align-items-center">
      <div class="control-label col-md-2 text-right required"><span class="red">*</span>时间</div>
      <div class="col-md-4">
        <input class="form-control" value="" id="start"  />
      </div>
 
      <div class="control-label col-md-2 text-right required"><span class="red">*</span>时间段</div>
      <div class="col-md-4">
        <input class="form-control"  value="" id="end"  />
      </div>

    </div>

    <div class="row align-items-center">
      <div class="control-label col-md-2 text-right">出货商品</div>
      <div class="col-md-4">
    <select name="goods[]" multiple="multiple"   class="form-control form-control-chosen" data-placeholder="请选择商品" >
        <option>电视机</option>
        <option>电冰箱</option>
        <option>电脑</option>
    </select>

      </div>
    </div>


    <div class="row align-items-center">
      <div class="control-label col-md-2 text-right required"><span class="red">*</span>多选</div>
      <div class="col-md-10">
        <div class="ckbox">
            <span>
             <input id="RMB" name="aaa" type="checkbox">
             <label  for="RMB">人民币</label>
            </span>
            <span class="ml30" >
             <input id="XP" name="aaa" type="checkbox">
             <label  for="XP">星票</label>
            </span>
        </div>
      </div>
    </div>

    <div class="row align-items-center">
      <div class="control-label col-md-2 text-right required"><span class="red">*</span>单选</div>
      <div class="col-md-10">
        <div class="ckbox">
            <span>
             <input id="RMB1" name="aaa" type="radio">
             <label  for="RMB1">人民币</label>
            </span>
            <span class="ml30" >
             <input id="XP1" name="aaa" type="radio">
             <label  for="XP1">星票</label>
            </span>
        </div>
      </div>
    </div>


    <div class="row align-items-center">
      <div class="control-label col-md-2 text-right required"><span class="red">*</span>发布内容</div>
      <div class="col-md-10">
        <textarea class="form-textarea form-control"  placeholder=""  ></textarea>
      </div>
    </div>

     <div class="row align-items-center">
      <div class="control-label col-md-2 text-right required"><span class="red">*</span>添加链接</div>
      <div class="col-md-8">
        <input class="form-control"   value=""  />
      </div>
      <div class="col-md-2">
        <span class="btn btn-primary" id="select_goods"  >添加链接</span>
      </div>
 
    </div>


    <div class="row align-items-center">
      <div class="control-label col-md-2 text-right">主图</div>
      <div class="col-md-10 goods_img">
          <span id="img_con" >
            <img  src="../images/p1.jpg" />
            <img  src="../images/p1.jpg" />
          </span>
        <img  src="../images/jia.png"  style="border:4px solid #a0a0a0;" id="upLoadPic" />
            <p id="demoText"></p>
      </div>
 
    </div>
  

    <div class="row align-items-center">
      <div class="control-label col-md-2 text-right required"><span class="red">*</span>HTML内容</div>
      <div class="col-md-10">
        <textarea class="form-textarea form-control"  placeholder=""  id="content" ></textarea>
      </div>
    </div>


    <div class="row align-items-center">
      <div class="control-label col-md-2 text-right">审核状态</div>
      <div class="col-md-4">
          <select class="form-control"   >
            <option>请选择</option>
          </select>
      </div>
  </div>

  
  
  <div class="row align-items-center">
      <div class="control-label col-md-2 text-right">发布时间</div>
      <div class="col-md-4">
         2019-12-01 12:12:00
      </div>
  </div>

  <div class="row align-items-center">
      <div class="control-label col-md-2 text-right">最新审核时间</div>
      <div class="col-md-4">
         2019-12-01 12:12:00
      </div>
  </div>


  <div class="row align-items-center">
      <div class="control-label col-md-2 text-right">功能授权</div>
      <div class="col-md-10" >
         <div id="test12" class="demo-tree-more">sssss</div>
      </div>
  </div>




<div class="mt60" >
  <div class="row align-items-center" >
       <div class="control-label col-md-2 text-right"></div>

      <div class="col-md-8 text-center">
        <span class="btn btn-primary w120 " >保存</span>
        <span class="btn btn-primary w150 ml15" >保存并继续写帖子</span>
        <span class="btn btn-primary w120 ml15" >返回</span>
      </div>
      <div class="col-md-2">
      </div>
    </div>
</div>

</form>
</div>

<script>

/*layui.config({
    base: '../dist/module'
}).extend({
    treeSelect: '/treeSelect/treeSelect',
});
*/

  $(function() {
    layui.use(['upload','laydate','eleTree', 'util','treeSelect','xmSelect'], function() {
    
var eleTree = layui.eleTree;
var layer = layui.layer;
var util = layui.util;
var treeSelect= layui.treeSelect;
var xmSelect = layui.xmSelect;
var upload = layui.upload;
var laydate = layui.laydate;
       laydate.render({
        elem: '#start'
      });

       laydate.render({
        range:true,
        elem: '#end'
      });

      //普通图片上传

      var uploadInst = upload.render({
        elem: '#upLoadPic',
        url: '/upload/',
        auto: false,
        choose: function(obj){

           //将每次选择的文件追加到文件队列
      var files = obj.pushFile();
    
      //预读本地文件，如果是多文件，则会遍历。(不支持ie8/9)
      obj.preview(function(index, file, result){
     
      //console.log(result); //得到文件base64编码
      
      $('#img_con').append("<img src='"+result+"'  />"); //图片链接（base64）
      
   
       });


      },
        done: function(res) {
          if (res.code > 0) {
            return layer.msg('上传失败');
          }
        },
        error: function() {}
      });


eleTree.render({
    elem: '#test12',
    data: [
        {
            id: 1,
            label: "安徽省",
            children: [
                {
                    id: 2,
                    label: "马鞍山市",
                    disabled: true,
                    children: [
                        {
                            id: 3,
                            label: "和县",
                        },
                        {
                            id: 4,
                            label: "花山区",
                        }
                    ]
                }
            ]
        },
        {
            id: 5,
            label: "河南省",
            children: [
                {
                    id: 6,
                    label: "郑州市"
                }
            ]
        }
    ],
    showCheckbox: true,
});
        
  

var el5;
$("[name='title']").on("click",function (e) {
   e.stopPropagation();
    if(!el5){
  
        el5=eleTree.render({
            elem: '.ele5',
            data: [
        {
            id: 1,
            label: "安徽省",
            children: [
                {
                    id: 2,
                    label: "马鞍山市",
                    disabled: true,
                    children: [
                        {
                            id: 3,
                            label: "和县",
                        },
                        {
                            id: 4,
                            label: "花山区",
                        }
                    ]
                }
            ]
        },
        {
            id: 5,
            label: "河南省",
            children: [
                {
                    id: 6,
                    label: "郑州市"
                }
            ]
        }
    ],
            defaultExpandAll: true,
            expandOnClickNode: false,
            highlightCurrent: true
        });
    }
    $(".ele5").toggle();
})
eleTree.on("nodeClick(data5)",function(d) {
    $("[name='title']").val(d.data.currentData.label)
    $(".ele5").hide();
}) 
$(document).on("click",function() {
    $(".ele5").hide();
})


  treeSelect.render({
            // 选择器
            elem: '#tree11',
            // 数据
            data: '../dist/module/data3.json',
            // 请求头
            headers: {},
            // 异步加载方式：get/post，默认get
            type: 'get',
            // 占位符
            placeholder: '查找信息',
            // 是否开启搜索功能：true/false，默认false
            search: true,
            // 一些可定制的样式
            style: {
                folder: {
                    enable: true
                },
                line: {
                    enable: true
                }
            },
            // 点击回调
            click: function(d){
                console.log(d);
            },
            // 加载完成后的回调函数
            success: function (d) {
                console.log(d);
//                选中节点，根据id筛选
                treeSelect.checkNode('tree', 3);

                console.log($('#tree').val());

//                获取zTree对象，可以调用zTree方法
               var treeObj = treeSelect.zTree('tree');
               console.log(treeObj);

//                刷新树结构
               treeSelect.refresh('tree');
            }
        });


        var demo1 = xmSelect.render({
            el: '#demo1', 
            name: 'brand',
            filterable: true,
            paging: true,
            pageSize: 4,
            radio: true,
            theme: {
              color: '#0081ff',
            },
            on: function(data){
                demo1.closed();
            },
           /* model: {
            icon: 'hidden',
            label: {
              type: 'text'
            }
            },*/
            data: [
                {name: '张三', value: 1},
                {name: '李四', value: 2},
                {name: '王五', value: 3},
                {name: '张三1', value: 4},
                {name: '李四2', value: 5},
                {name: '王五3', value: 6},
                {name: '张三4', value: 7},
                {name: '李四5', value: 8},
                {name: '王五6', value: 9},
                {name: '张三7', value: 11},
                {name: '李四8', value: 12},
                {name: '王五9', value: 13},

            ]
        });


        $("#fuzhi").click(function(){
           demo1.setValue([
                {name: '张三', value: 1},
              ]);
        });

        $("#quzhi").click(function(){
           var a = demo1.getValue();
           console.log(a);
           alert(a[0].name);
        });


/*
var demo2 = xmSelect.render({
  el: '#demo2', 
  //autoRow: true,
  radio: true,
  on: function(data){
      demo2.closed();
  },
  filterable: true,
  tree: {
    show: true,
    showFolderIcon: true,
    showLine: true,
    indent: 20,
    expandedKeys: [ -3 ],
  },
  filterable: true,
  height: 'auto',
  data(){
    return [
      {name: '销售员', value: -1, children: [
        {name: '张三1', value: 1},
        {name: '李四1', value: 2},
       
      ]},
      {name: '奖品', value: -2, children: [
        {name: '奖品3', value: -3, children: [
          {name: '苹果3', value: 14, },
          {name: '香蕉3', value: 15},
        ]},
      
      ]},
    ]
  }
})*/





    });


    $("#select_goods").click(function(){

      layerOpen("marketing/add_link_goods.html","选择商品","900px","600px");

    });

     window.createEditor('#content', {height: 250});

      //下拉
  $('.form-control-chosen').chosen({
  width: '100%',
  disable_search:true,
  allow_single_deselect:true
    });
    


    $("#reward").click(function(){

        layerOpen("reward.html");

    });

    $("#pay").click(function(){

        layerOpen("myhome/pay.html",0,"800px","600px");

    });




  });
</script>


